<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Manage Sizes</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background: #f4f6f9; }
        .card-custom { border-radius: 12px; }
    </style>
</head>

<body>

<div class="container mt-5">

    <h2 th:text="'Sizes - ' + ${brand.name}"></h2>

    <a th:href="@{/billing/brands}" class="btn btn-outline-secondary mb-3">
        ← Back
    </a>

    <!-- Size List -->
    <div class="card shadow-sm mb-4 card-custom">
        <div class="card-body">

            <table class="table table-bordered align-middle">
                <thead class="table-dark">
                <tr>
                    <th>Size</th>
                    <th>Price</th>
                    <th>Packaging</th>
                    <th>ABV %</th>
                    <th>Status</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>

                <tr th:each="size : ${brand.sizes}">
                    <td th:text="${size.sizeLabel}"></td>
                    <td>₹ <span th:text="${size.price}"></span></td>
                    <td th:text="${size.packaging}"></td>
                    <td th:text="${size.abvPercent}"></td>

                    <td>
                        <span th:if="${size.active}" class="badge bg-success">Active</span>
                        <span th:if="${!size.active}" class="badge bg-danger">Inactive</span>
                    </td>

                    <td>
                        <form th:action="@{'/billing/brands/' + ${brand.id} + '/sizes/' + ${size.id} + '/delete'}"
                              method="post">
                            <button class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('Remove this size?')">
                                Remove
                            </button>
                        </form>
                    </td>
                </tr>

                </tbody>
            </table>

        </div>
    </div>

    <!-- Add Size -->
    <div class="card shadow card-custom">
        <div class="card-body">

            <h5>Add New Size</h5>
            <hr>

            <form th:action="@{'/billing/brands/' + ${brand.id} + '/sizes'}"
                  th:object="${newSize}"
                  method="post">

                <div class="row">
                    <div class="col-md-3 mb-3">
                        <input type="text" th:field="*{sizeLabel}"
                               placeholder="180ml / 750ml"
                               class="form-control" required>
                    </div>

                    <div class="col-md-2 mb-3">
                        <input type="number" step="0.01"
                               th:field="*{price}"
                               placeholder="Price"
                               class="form-control" required>
                    </div>

                    <div class="col-md-2 mb-3">
                        <select th:field="*{packaging}" class="form-select">
                            <option th:each="p : ${packagings}"
                                    th:value="${p}"
                                    th:text="${p}">
                            </option>
                        </select>
                    </div>

                    <div class="col-md-2 mb-3">
                        <input type="number" step="0.1"
                               th:field="*{abvPercent}"
                               placeholder="ABV %"
                               class="form-control">
                    </div>

                    <div class="col-md-2 mb-3">
                        <button class="btn btn-dark w-100">
                            Add
                        </button>
                    </div>
                </div>

            </form>

        </div>
    </div>

</div>

</body>
</html>